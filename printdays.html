<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Calendar test 35 ...</title>
		<script src="zangli.js" async defer charset="UTF-8"></script>
	</head>
	<body>
<script>
if(typeof getZangli == "undefined"){
	getZangli=function(){
		console.log("藏历映射表尚未加载");
		return "error";
	}
}
function zangli_callback(){
	var ar=[];
	var d = new Date();
	var y = d.getFullYear();
	var s = new Date(y,0, 1);
	var oldmonth;
	var newmonth;
			
	for(var i=1;i<366*4;i++){
		var z=getZangli(s);
		if(z.extraInfo) {
			ar.push(s.getFullYear()+"/"+(s.getMonth()+1) +"/"+s.getDate()+",&emsp"+z.value + ",&emsp"+z.extraInfo);
		}
		oldmonth = s.getMonth();
		s.setDate(s.getDate()+1);
		newmonth = s.getMonth();
		if(newmonth != oldmonth) ar.push("---");
	}
		
	document.body.innerHTML =ar.join("<br>")
}
</script>
</body>
</html>
